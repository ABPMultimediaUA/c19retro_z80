;;
;;  MAP MANAGER HEADER
;;

.globl  man_map_init
.globl  man_map_update
.globl  man_map_terminate

;.globl  man_map_create_map

.globl  man_map_get_lvl_map
.globl  man_map_get_map_array

;.globl  man_map_set_block_type

;;########################################################
;;                        MACROS                         #              
;;########################################################

;;-----------------------  BLOCK  ------------------------
.macro DefineBlock _type
    .db _type
.endm

.macro DefineBlockDefault    
    .db default_btype        
.endm

.macro DefineBlockArray _Tname,_N,_DefineBlock
    _Tname'_array: 
    .rept _N    
        _DefineBlock
    .endm
.endm

.macro DefineLevel1Map    
    .db 0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xDD,   0xFF,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xEE
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
.endm

.macro DefineLevel2Map    
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xEE,   0xDD      
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD   
    .db 0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD   
    .db 0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD   
.endm


.macro DefineLevel3Map    
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xEE
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF
.endm

.macro DefineLevel4Map    
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xEE
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF
    .db 0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xFF,   0xDD,   0xDD,   0xDD,   0xFF,   0xDD,   0xFF
    .db 0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xFF,   0xDD,   0xDD,   0xFF,   0xFF,   0xFF
.endm



.macro DefineMapsArray _Tname    
    _Tname'_num:    .db 1    
    _Tname'_last:   .dw _Tname'_array
    _Tname'_array: 
        DefineLevel1Map
        DefineLevel2Map
        DefineLevel3Map
        DefineLevel4Map
.endm
;;########################################################
;;                       CONSTANTS                       #             
;;########################################################

;;---------------------  BLOCK ENTITY  -------------------
b_type = 0
sizeof_block  = 1
sizeof_map    = 19*11
max_maps = 4

;;########################################################
;;                      BLOCK TYPES                     #             
;;########################################################
default_btype = 0xFF ;floor
solid_btype = 0xDD   ;solid block, immutable
box_btype = 0xBB     ;box block, mutable
exit_btype = 0xEE     ;box block, mutable

map_array_end = 0x00